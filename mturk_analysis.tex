\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={mturk\_analysis},
            pdfauthor={Alex},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{{#1}}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\ImportTok}[1]{{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{{#1}}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{{#1}}}}
\newcommand{\BuiltInTok}[1]{{#1}}
\newcommand{\ExtensionTok}[1]{{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{{#1}}}
\newcommand{\RegionMarkerTok}[1]{{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{{#1}}}}
\newcommand{\NormalTok}[1]{{#1}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{mturk\_analysis}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Alex}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{9/15/2019}


\begin{document}
\maketitle

Preliminaries for analysis.

\begin{verbatim}
## Warning: package 'tidyverse' was built under R version 3.4.2
\end{verbatim}

\begin{verbatim}
## -- Attaching packages ---------------------------------- tidyverse 1.2.1 --
\end{verbatim}

\begin{verbatim}
## v ggplot2 3.0.0       v purrr   0.2.5  
## v tibble  2.1.1       v dplyr   0.8.0.1
## v tidyr   0.8.1       v stringr 1.3.1  
## v readr   1.1.1       v forcats 0.3.0
\end{verbatim}

\begin{verbatim}
## Warning: package 'ggplot2' was built under R version 3.4.4
\end{verbatim}

\begin{verbatim}
## Warning: package 'tibble' was built under R version 3.4.4
\end{verbatim}

\begin{verbatim}
## Warning: package 'tidyr' was built under R version 3.4.4
\end{verbatim}

\begin{verbatim}
## Warning: package 'purrr' was built under R version 3.4.4
\end{verbatim}

\begin{verbatim}
## Warning: package 'dplyr' was built under R version 3.4.4
\end{verbatim}

\begin{verbatim}
## Warning: package 'stringr' was built under R version 3.4.4
\end{verbatim}

\begin{verbatim}
## Warning: package 'forcats' was built under R version 3.4.3
\end{verbatim}

\begin{verbatim}
## -- Conflicts ------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
\end{verbatim}

\begin{verbatim}
## here() starts at /Users/abc/Documents/multirmts
\end{verbatim}

\begin{verbatim}
## Warning: package 'tidyboot' was built under R version 3.4.4
\end{verbatim}

Now load data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d_raw <-}\StringTok{ }\KeywordTok{read_csv}\NormalTok{(}\KeywordTok{here}\NormalTok{(}\StringTok{"data/mturk_anonymized.csv"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Missing column names filled in: 'X1' [1]
\end{verbatim}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   .default = col_character(),
##   X1 = col_integer(),
##   rt = col_integer(),
##   trial_index = col_integer(),
##   time_elapsed = col_integer(),
##   subject = col_integer(),
##   key_press = col_integer(),
##   startTime = col_double(),
##   endTime = col_double(),
##   RT = col_double()
## )
\end{verbatim}

\begin{verbatim}
## See spec(...) for full column specifications.
\end{verbatim}

Clean up unnecessary fields.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# look at trial_type="RMTStrain" & trial_index 2 (block 1) and 11 (block 2) to check if block is same or diff}
\NormalTok{d_raw$type =}\StringTok{ }\OtherTok{NA}
\NormalTok{d_raw$FirstBlock =}\StringTok{ }\OtherTok{NA}
\NormalTok{for(s in }\KeywordTok{unique}\NormalTok{(d_raw$subject)) \{}
  \NormalTok{bl1_ind =}\StringTok{ }\KeywordTok{which}\NormalTok{(d_raw$subject==s &}\StringTok{ }\NormalTok{d_raw$trial_index==}\DecValTok{2}\NormalTok{)}
  \NormalTok{bl2_ind =}\StringTok{ }\KeywordTok{which}\NormalTok{(d_raw$subject==s &}\StringTok{ }\NormalTok{d_raw$trial_index==}\DecValTok{11}\NormalTok{)}
  \NormalTok{bl1_type =}\StringTok{ }\KeywordTok{ifelse}\NormalTok{((d_raw[bl1_ind,]$left_object==d_raw[bl1_ind,]$right_object) &}\StringTok{ }\NormalTok{(d_raw[bl1_ind,]$activate==}\StringTok{"true"}\NormalTok{), }\StringTok{"same"}\NormalTok{, }\StringTok{"different"}\NormalTok{)}
  \NormalTok{bl2_type =}\StringTok{ }\KeywordTok{ifelse}\NormalTok{((d_raw[bl2_ind,]$left_object==d_raw[bl2_ind,]$right_object) &}\StringTok{ }\NormalTok{(d_raw[bl2_ind,]$activate==}\StringTok{"true"}\NormalTok{), }\StringTok{"same"}\NormalTok{, }\StringTok{"different"}\NormalTok{)}
  \NormalTok{bl1_test_ind =}\StringTok{ }\KeywordTok{with}\NormalTok{(d_raw, subject==s &}\StringTok{ }\NormalTok{trial_type==}\StringTok{"RMTStest"} \NormalTok{&}\StringTok{ }\NormalTok{trial_index <}\StringTok{ }\DecValTok{10}\NormalTok{)}
  \NormalTok{bl2_test_ind =}\StringTok{ }\KeywordTok{with}\NormalTok{(d_raw, subject==s &}\StringTok{ }\NormalTok{trial_type==}\StringTok{"RMTStest"} \NormalTok{&}\StringTok{ }\NormalTok{trial_index >}\StringTok{ }\DecValTok{10}\NormalTok{)}
  \NormalTok{d_raw[bl1_test_ind,]$type =}\StringTok{ }\NormalTok{bl1_type}
  \NormalTok{d_raw[bl2_test_ind,]$type =}\StringTok{ }\NormalTok{bl2_type}
  \NormalTok{d_raw[}\KeywordTok{with}\NormalTok{(d_raw, subject==s &}\StringTok{ }\NormalTok{trial_type==}\StringTok{"RMTStest"}\NormalTok{),]$FirstBlock =}\StringTok{ }\KeywordTok{ifelse}\NormalTok{(bl1_type==}\StringTok{"same"}\NormalTok{,}\StringTok{"sameFirst"}\NormalTok{,}\StringTok{"diffFirst"}\NormalTok{)}
\NormalTok{\}}

\NormalTok{d <-}\StringTok{ }\NormalTok{d_raw %>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(trial_type==}\StringTok{"RMTStest"}\NormalTok{) %>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(-X1, -view_history, -rt, }
         \NormalTok{-trial_type, -internal_node_id,}
         \NormalTok{-country_code, -stimulus, -key_press, }
         \NormalTok{-stimulus_type, -correct, -left_object, }
         \NormalTok{-right_object, -activate, -box, -startTime, }
         \NormalTok{-endTime, -RT, -samePair, -diffPair)}
\end{Highlighting}
\end{Shaded}

Renumber trial index to be sensible, code and score responses.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Renumber trial index to 1-6 for each ppt. }
\NormalTok{d$trial_index=}\KeywordTok{rep}\NormalTok{(}\DecValTok{1}\NormalTok{:}\DecValTok{3}\NormalTok{,}\DecValTok{2}\NormalTok{*}\KeywordTok{length}\NormalTok{(}\KeywordTok{unique}\NormalTok{(d$subject)))}

\CommentTok{# Add resp column with participant's choice recorded. }
\NormalTok{d$resp=}\KeywordTok{ifelse}\NormalTok{((d$choice==}\StringTok{"leftTestButton"} \NormalTok{&}\StringTok{ }\NormalTok{d$sameSide==}\StringTok{"L"}\NormalTok{) |}\StringTok{ }\NormalTok{(d$choice==}\StringTok{"rightTestButton"} \NormalTok{&}\StringTok{ }\NormalTok{d$sameSide==}\StringTok{"R"}\NormalTok{),}\StringTok{"same"}\NormalTok{,}\StringTok{"different"}\NormalTok{)}

\CommentTok{# Score choice.}
\NormalTok{d$correct=}\KeywordTok{ifelse}\NormalTok{(d$resp==d$type,}\DecValTok{1}\NormalTok{,}\DecValTok{0}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

By trial type.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ms <-}\StringTok{ }\NormalTok{d %>%}
\StringTok{  }\KeywordTok{group_by}\NormalTok{(type) %>%}
\StringTok{  }\KeywordTok{tidyboot_mean}\NormalTok{(correct, }\DataTypeTok{na.rm=}\NormalTok{T)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Unquoting language objects with `!!!` is deprecated as of rlang 0.4.0.
## Please use `!!` instead.
## 
##   # Bad:
##   dplyr::select(data, !!!enquo(x))
## 
##   # Good:
##   dplyr::select(data, !!enquo(x))    # Unquote single quosure
##   dplyr::select(data, !!!enquos(x))  # Splice list of quosures
## 
## This warning is displayed once per session.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ggplot}\NormalTok{(ms, }
       \KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =} \NormalTok{type, }\DataTypeTok{y =} \NormalTok{mean, }\DataTypeTok{col =} \NormalTok{type)) +}\StringTok{ }
\StringTok{  }\KeywordTok{geom_pointrange}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{ymin =} \NormalTok{ci_lower, }\DataTypeTok{ymax =} \NormalTok{ci_upper)) +}\StringTok{ }
\StringTok{  }\KeywordTok{ylim}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{) +}\StringTok{ }
\StringTok{  }\KeywordTok{ylab}\NormalTok{(}\StringTok{"Proportion correct"}\NormalTok{) +}\StringTok{ }
\StringTok{  }\KeywordTok{xlab}\NormalTok{(}\StringTok{"Trial type"}\NormalTok{) +}\StringTok{ }
\StringTok{  }\KeywordTok{geom_hline}\NormalTok{(}\DataTypeTok{yintercept =} \NormalTok{.}\DecValTok{5}\NormalTok{, }\DataTypeTok{lty =} \DecValTok{2}\NormalTok{)  +}
\StringTok{  }\KeywordTok{theme_classic}\NormalTok{() +}\StringTok{ }
\StringTok{  }\NormalTok{ggthemes::}\KeywordTok{scale_color_solarized}\NormalTok{() +}\StringTok{ }
\StringTok{  }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{legend.position =} \StringTok{"bottom"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{mturk_analysis_files/figure-latex/unnamed-chunk-5-1.pdf}

By trial type and trial number.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ms <-}\StringTok{ }\NormalTok{d %>%}
\StringTok{  }\KeywordTok{group_by}\NormalTok{(type, trial_index) %>%}
\StringTok{  }\KeywordTok{tidyboot_mean}\NormalTok{(correct, }\DataTypeTok{na.rm=}\NormalTok{T)}

\KeywordTok{ggplot}\NormalTok{(ms, }
       \KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =} \NormalTok{trial_index, }\DataTypeTok{y =} \NormalTok{mean, }\DataTypeTok{col =} \NormalTok{type)) +}\StringTok{ }
\StringTok{  }\KeywordTok{geom_pointrange}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{ymin =} \NormalTok{ci_lower, }\DataTypeTok{ymax =} \NormalTok{ci_upper), }
                  \DataTypeTok{position =} \KeywordTok{position_dodge}\NormalTok{(}\DataTypeTok{width =} \NormalTok{.}\DecValTok{1}\NormalTok{)) +}\StringTok{ }
\StringTok{  }\KeywordTok{geom_line}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{group =} \NormalTok{type)) +}\StringTok{ }
\StringTok{  }\KeywordTok{ylim}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{) +}\StringTok{ }
\StringTok{  }\KeywordTok{ylab}\NormalTok{(}\StringTok{"Proportion correct"}\NormalTok{) +}\StringTok{ }
\StringTok{  }\KeywordTok{xlab}\NormalTok{(}\StringTok{"Trial type"}\NormalTok{) +}\StringTok{ }
\StringTok{  }\KeywordTok{geom_hline}\NormalTok{(}\DataTypeTok{yintercept =} \NormalTok{.}\DecValTok{5}\NormalTok{, }\DataTypeTok{lty =} \DecValTok{2}\NormalTok{) +}
\StringTok{  }\KeywordTok{theme_classic}\NormalTok{() +}\StringTok{ }
\StringTok{  }\NormalTok{ggthemes::}\KeywordTok{scale_color_solarized}\NormalTok{() +}\StringTok{ }
\StringTok{  }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{legend.position =} \StringTok{"bottom"}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\includegraphics{mturk_analysis_files/figure-latex/unnamed-chunk-6-1.pdf}

Trial by block.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ms <-}\StringTok{ }\NormalTok{d %>%}\StringTok{  }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(type, FirstBlock, trial_index) %>%}\StringTok{  }
\StringTok{  }\KeywordTok{tidyboot_mean}\NormalTok{(correct, }\DataTypeTok{na.rm=}\NormalTok{T)}

\KeywordTok{ggplot}\NormalTok{(ms,        }
  \KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =} \NormalTok{trial_index, }\DataTypeTok{y =} \NormalTok{mean, }\DataTypeTok{col =} \NormalTok{type)) +}\StringTok{   }
\StringTok{  }\KeywordTok{geom_pointrange}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{ymin =} \NormalTok{ci_lower, }\DataTypeTok{ymax =} \NormalTok{ci_upper), }\DataTypeTok{position =} \KeywordTok{position_dodge}\NormalTok{(}\DataTypeTok{width =} \NormalTok{.}\DecValTok{1}\NormalTok{)) +}\StringTok{   }
\StringTok{  }\KeywordTok{geom_line}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{group =} \NormalTok{type)) +}\StringTok{   }
\StringTok{  }\KeywordTok{facet_wrap}\NormalTok{(~FirstBlock) +}\StringTok{ }
\StringTok{  }\KeywordTok{ylim}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{) +}\StringTok{   }
\StringTok{  }\KeywordTok{ylab}\NormalTok{(}\StringTok{"Proportion correct"}\NormalTok{) +}\StringTok{   }
\StringTok{  }\KeywordTok{xlab}\NormalTok{(}\StringTok{"Trial type"}\NormalTok{) +}\StringTok{   }
\StringTok{  }\KeywordTok{geom_hline}\NormalTok{(}\DataTypeTok{yintercept =} \NormalTok{.}\DecValTok{5}\NormalTok{, }\DataTypeTok{lty =} \DecValTok{2}\NormalTok{) +}\StringTok{  }
\StringTok{  }\KeywordTok{theme_classic}\NormalTok{() +}\StringTok{   }
\StringTok{  }\NormalTok{ggthemes::}\KeywordTok{scale_color_solarized}\NormalTok{() +}\StringTok{   }
\StringTok{  }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{legend.position =} \StringTok{"bottom"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{mturk_analysis_files/figure-latex/unnamed-chunk-7-1.pdf}


\end{document}
